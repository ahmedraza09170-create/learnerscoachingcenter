<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Learners Academy</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <link rel="stylesheet" href="Css/index.css">
    <!-- FONT AWESOME CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />

    <!-- Swiper CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
</head>

<body>

    <!-- NAVBAR -->
    <!-- Premium Navbar Start -->
    <nav class="navbar navbar-expand-lg py-3 premium-nav bg-white shadow-sm fixed-top">
        <div class="container d-flex align-items-center justify-content-between">

            <a class="navbar-brand d-flex align-items-center gap-2" href="#">
                <img src="images/logo/logo.webp" alt="Learners Academy" height="48" /> </a>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navMenu">
                <ul class="navbar-nav ms-auto gap-3"> <!-- reduced space -->
                    <li class="nav-item"><a class="nav-link premium-link text-dark fw-semibold" href="#">Home</a></li>
                    <li class="nav-item"><a class="nav-link premium-link text-dark fw-semibold"
                            href="#programs">Programs</a></li>
                    <li class="nav-item"><a class="nav-link premium-link text-dark fw-semibold"
                            href="#faculty">Faculty</a></li>
                    <li class="nav-item"><a class="nav-link premium-link text-dark fw-semibold"
                            href="#achievement">Achievement</a></li>
                    <li class="nav-item"><a class="nav-link premium-link text-dark fw-semibold"
                            href="#activities">Activities</a></li>
                    <li class="nav-item"><a class="nav-link premium-link text-dark fw-semibold" href="#news">News
                            Feed</a></li>
                    <li class="nav-item"><a class="nav-link premium-link text-dark fw-semibold"
                            href="#promotions">Promotions</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- Premium Navbar End -->


    <!-- HERO SECTION -->


    <section class="carousel-container">
        <div id="schoolCarousel" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-inner">

                <div class="carousel-item active">
                    <img src="Images/banner/image-4.webp" alt="Slide 1">
                    <div class="carousel-overlay"></div>
                    <div class="carousel-text left-text">
                        <h1>Unlock Your Potential with Learners Academy</h1>
                        <p>Guiding Students Toward Excellence and Confidence</p>
                    </div>
                </div>

                <div class="carousel-item">
                    <img src="Images/banner/image-3.webp" alt="Slide 2">
                    <div class="carousel-overlay"></div>
                    <div class="carousel-text left-text">
                        <h1>Academic Excellence That Sets You Apart</h1>
                        <p>Coaching That Builds Skills, Discipline, and Results</p>
                    </div>
                </div>

                <div class="carousel-item">
                    <img src="Images/banner/image-1.webp" alt="Slide 3">
                    <div class="carousel-overlay"></div>
                    <div class="carousel-text left-text">
                        <h1>A Smarter Way to Learn and Grow</h1>
                        <p>Interactive Sessions Designed for Real Improvement</p>
                    </div>
                </div>

            </div>

            <!-- Bottom Buttons -->
            <div class="carousel-buttons">
                <button class="active" onclick="goToSlide(0)"></button>
                <button onclick="goToSlide(1)"></button>
                <button onclick="goToSlide(2)"></button>
            </div>
        </div>
    </section>



    <!-- Success Story -->
    <section class="premium-success py-5">
        <div class="container">

            <!-- Heading -->
            <div class="text-center mb-5">
                <h5 class="tagline">OUR SUCCESS STORIES</h5>
                <h2 class="main-heading">Inspiring Journeys of Our Toppers</h2>
                <p class="sub-text">Real students. Real achievements. Real impact.</p>
            </div>

            <div class="row g-4">

                <!-- CARD 1 -->
                <div class="col-md-3 col-sm-6">
                    <div class="story-card">
                        <img src="Images/story-section/photo-1.webp" class="story-img">
                        <div class="story-content">
                            <h3>Ali Khan</h3>
                            <p>ECAT Topper 2023</p>
                        </div>
                    </div>
                </div>

                <!-- CARD 2 -->
                <div class="col-md-3 col-sm-6">
                    <div class="story-card">
                        <img src="Images/story-section/photo-2.webp" class="story-img">
                        <div class="story-content">
                            <h3>Maryam A.</h3>
                            <p>MCAT Achiever 2023</p>
                        </div>
                    </div>
                </div>

                <!-- CARD 3 -->
                <div class="col-md-3 col-sm-6">
                    <div class="story-card">
                        <img src="Images/story-section/photo-3.webp" class="story-img">
                        <div class="story-content">
                            <h3>Ahmed Raza</h3>
                            <p>Top Performer 2024</p>
                        </div>
                    </div>
                </div>

                <!-- CARD 4 -->
                <div class="col-md-3 col-sm-6">
                    <div class="story-card">
                        <img src="Images/story-section/photo-3.webp" class="story-img">
                        <div class="story-content">
                            <h3>Sara H.</h3>
                            <p>A+ Grade Holder</p>
                        </div>
                    </div>
                </div>

                <!-- CARD 5 -->
                <div class="col-md-3 col-sm-6">
                    <div class="story-card">
                        <img src="Images/story-section/photo-2.webp" class="story-img">
                        <div class="story-content">
                            <h3>Usman Tariq</h3>
                            <p>Board Topper</p>
                        </div>
                    </div>
                </div>

                <!-- CARD 6 -->
                <div class="col-md-3 col-sm-6">
                    <div class="story-card">
                        <img src="Images/story-section/photo-3.webp" class="story-img">
                        <div class="story-content">
                            <h3>Zara Khan</h3>
                            <p>Medical Achiever</p>
                        </div>
                    </div>
                </div>
                <!-- CARD 7 -->
                <div class="col-md-3 col-sm-6">
                    <div class="story-card">
                        <img src="Images/story-section/photo-1.webp" class="story-img">
                        <div class="story-content">
                            <h3>Zara Khan</h3>
                            <p>Medical Achiever</p>
                        </div>
                    </div>
                </div>
                <!-- CARD 8 -->
                <div class="col-md-3 col-sm-6">
                    <div class="story-card">
                        <img src="Images/story-section/photo-2.webp" class="story-img">
                        <div class="story-content">
                            <h3>Zara Khan</h3>
                            <p>Medical Achiever</p>
                        </div>
                    </div>
                </div>
                <!-- MISSION & VISION - PREMIUM -->
                <section class="py-5 premium-mv">
                    <div class="container">
                        <div class="text-center mb-5">
                            <h2 class="section-title">Our Mission & Vision</h2>
                            <p class="section-sub">Shaping futures with excellence, discipline & innovation.</p>
                        </div>

                        <div class="row g-4">
                            <!-- Mission -->
                            <div class="col-md-6">
                                <div class="mv-box">
                                    <div class="mv-icon">
                                        <i class="bi bi-bullseye"></i>
                                    </div>
                                    <h3 class="fw-bold">Our Mission</h3>
                                    <p>
                                        At Learners Academy, we empower students with high-quality education, modern
                                        coaching methods, and a growth mindset. Our mission is to build confidence,
                                        sharpen critical thinking, and instill strong ethical values, preparing students
                                        to excel academically, contribute meaningfully to society, and grow into capable
                                        individuals ready to embrace real-world challenges.
                                    </p>
                                </div>
                            </div>

                            <!-- Vision -->
                            <div class="col-md-6">
                                <div class="mv-box">
                                    <div class="mv-icon">
                                        <i class="bi bi-eye"></i>
                                    </div>
                                    <h3 class="fw-bold">Our Vision</h3>
                                    <p>
                                        We envision Learners Academy as Pakistan‚Äôs leading educational institution,
                                        renowned for innovation, discipline, and outstanding academic achievements. Our
                                        vision is to nurture well-rounded individuals, equipped with knowledge, skills,
                                        and values, enabling them to thrive in a rapidly changing world and make a
                                        lasting, positive impact on their communities.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>



                <!-- PROGRAMS SECTION -->
                <section class="py-5 bg-light" id="programs">
                    <div class="container text-center">

                        <!-- Section Heading -->
                        <div class="mb-5">
                            <h5 class="text-uppercase text-primary fw-semibold">Our Programs</h5>
                            <h2 class="fw-bold">Comprehensive Coaching for Every Student</h2>
                            <p class="text-muted">Expert guidance and tailored programs to help students achieve
                                academic excellence and personal growth.</p>
                        </div>

                        <!-- Programs Cards -->
                        <div class="row g-4 justify-content-center">

                            <!-- Program Card 1 -->
                            <div class="col-md-5">
                                <div class="card program-card shadow-lg border-0 text-center p-4 h-100">
                                    <h4 class="fw-bold mb-3">MCAT / ECAT Coaching</h4>
                                    <p class="text-muted mb-4">We offer specialized coaching programs for students
                                        aspiring to pursue medical or engineering careers. Our experienced faculty
                                        members provide comprehensive guidance and support to ensure students are
                                        well-prepared to excel in these competitive exams.</p>
                                </div>
                            </div>

                            <!-- Program Card 2 -->
                            <div class="col-md-5">
                                <div class="card program-card shadow-lg border-0 text-center p-4 h-100">
                                    <h4 class="fw-bold mb-3">Coaching Classes (IX ‚Äî XII)</h4>
                                    <p class="text-muted mb-4">We provide coaching classes for students in grades IX, X,
                                        XI, and XII, catering to both national and international curricula. Our skilled
                                        teachers employ effective teaching methodologies and personalized attention to
                                        facilitate a deep understanding of the subjects and enhance academic
                                        performance.</p>
                                </div>
                            </div>

                        </div>

                        <!-- Single Center Button -->
                        <div class="mt-4">
                            <a href="#" class="btn btn-lg btn-primary px-5 py-3 shadow-lg">Find Out More</a>
                        </div>

                    </div>
                </section>

                <!-- PREMIUM TESTIMONIAL SECTION -->
                <section class="premium-testimonials py-5" style="background: #e6f2ff;">
                    <div class="container text-center">

                        <!-- Heading -->
                        <div class="mb-5">
                            <h5 class="text-uppercase text-primary fw-semibold">Testimonials</h5>
                            <h2 class="fw-bold">Hear From Our Successful Students</h2>
                            <p class="text-muted">Real stories, real impact, real inspiration.</p>
                        </div>

                        <!-- Testimonial Carousel -->
                        <div class="testimonial-carousel position-relative mx-auto" style="max-width: 600px;">

                            <div class="testimonial-item active">
                                <img src="Images/story-section/photo-1.webp" class="rounded-circle mb-4 shadow-lg"
                                    width="140" height="140">
                                <h4 class="fw-bold">Ali Khan</h4>
                                <p class="text-primary fw-semibold">ECAT Topper 2023</p>
                                <p class="text-muted mx-auto" style="max-width: 500px; font-style: italic;">"Learners
                                    Academy helped me excel in my exams with confidence and clear concepts. The guidance
                                    and motivation I received were incredible."</p>
                            </div>

                            <div class="testimonial-item">
                                <img src="Images/story-section/photo-2.webp" class="rounded-circle mb-4 shadow-lg"
                                    width="140" height="140">
                                <h4 class="fw-bold">Maryam A.</h4>
                                <p class="text-primary fw-semibold">MCAT Achiever 2023</p>
                                <p class="text-muted mx-auto" style="max-width: 500px; font-style: italic;">"The
                                    personalized coaching and supportive environment at Learners Academy made learning
                                    fun and effective. I achieved my goals!"</p>
                            </div>

                            <div class="testimonial-item">
                                <img src="Images/story-section/photo-3.webp" class="rounded-circle mb-4 shadow-lg"
                                    width="140" height="140">
                                <h4 class="fw-bold">Ahmed Raza</h4>
                                <p class="text-primary fw-semibold">Top Performer 2024</p>
                                <p class="text-muted mx-auto" style="max-width: 500px; font-style: italic;">"From doubt
                                    clearing to exam strategies, every class at Learners Academy boosted my confidence.
                                    Truly life-changing!"</p>
                            </div>

                        </div>
                    </div>
                </section>


                <!-- Gallery -->
                <section class="py-5 bg-light gallery-section">
                    <div class="container text-center">
                        <h2 class="fw-bold theme-primary mb-4">Gallery</h2>
                        <div class="row g-4">
                            <div class="col-md-3">
                                <img src="Images/gallery/image-1.webp" class="story-img gallery-img"
                                    data-bs-toggle="modal" data-bs-target="#galleryModal"
                                    data-src="Images/gallery/image-1.webp">
                            </div>
                            <div class="col-md-3">
                                <img src="Images/gallery/image-2.webp" class="story-img gallery-img"
                                    data-bs-toggle="modal" data-bs-target="#galleryModal"
                                    data-src="Images/gallery/image-2.webp">
                            </div>
                            <div class="col-md-3">
                                <img src="Images/gallery/image-3.webp" class="story-img gallery-img"
                                    data-bs-toggle="modal" data-bs-target="#galleryModal"
                                    data-src="Images/gallery/image-3.webp">
                            </div>
                            <div class="col-md-3">
                                <img src="Images/gallery/image-4.webp" class="story-img gallery-img"
                                    data-bs-toggle="modal" data-bs-target="#galleryModal"
                                    data-src="Images/gallery/image-4.webp">
                            </div>
                        </div>
                    </div>
                </section>
                <!-- Gallery Modal -->
                <div class="modal fade" id="galleryModal" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered modal-lg">
                        <div class="modal-content bg-transparent border-0">
                            <div class="modal-body p-0">
                                <img src="" id="modal-img" class="img-fluid rounded shadow-lg">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- LOCATION + FOOTER -->
                <footer class="py-5 text-white" style="background:#003366;">
                    <div class="container">
                        <div class="row g-4">
                            <div class="col-md-4">
                                <h5 class="fw-bold">Learners Academy</h5>
                                <p>One of the best academies in Hyderabad. Empowering students to achieve excellence.
                                </p>
                            </div>
                            <div class="col-md-4">
                                <h5 class="fw-bold">Contact Us</h5>
                                <p>üìç Behind Lal Qila Restaurant, Auto Bhan Road Hyderabad</p>
                                <p>üìû +92 3332150657</p>
                                <p>‚úâ info@learnersacademy.ac.pk</p>
                            </div>
                            <div class="col-md-4">
                                <h5 class="fw-bold">Follow Us</h5>
                                <div class="d-flex gap-3 fs-4">
                                    <i class="bi bi-facebook"></i>
                                    <i class="bi bi-instagram"></i>
                                    <i class="bi bi-linkedin"></i>
                                    <i class="bi bi-twitter"></i>
                                </div>
                            </div>
                        </div>
                        <hr class="my-4" style="border-color: #D4A017;">
                        <p class="text-center mb-0">¬© 2023 Learners Academy. Powered by Ahmed Raza</p>
                    </div>
                </footer>

                <!-- Floating icons -->
                <!-- Floating Buttons -->
                <div class="floating-icons">
                    <div class="float-btn" id="whatsappBtn">
                        <i class="fab fa-whatsapp fa-lg"></i>
                        <span>WhatsApp</span>
                    </div>
                    <div class="float-btn" id="liveChatBtn">
                        <i class="fas fa-comment-dots fa-lg"></i>
                        <span>Live Chat</span>
                    </div>
                </div>

                <!-- Chat Widget -->
                <div class="chat-widget" id="chatWidget">
                    <div class="chat-header d-flex justify-content-between align-items-center">
                        <span>Live Chat</span>
                        <button class="close-chat-btn" id="closeChatBtn">&times;</button>
                    </div>

                    <div class="chat-body" id="chatBody">

                        <!-- Default Questions -->
                        <div class="default-questions mb-3">
                            <h6 class="fw-bold text-primary mb-2">Quick Questions</h6>

                            <button class="question-btn">What are your services?</button>
                            <button class="question-btn">Timings?</button>
                            <button class="question-btn">Fees?</button>
                            <button class="question-btn">Location?</button>
                            <button class="question-btn">Do you offer MCAT coaching?</button>
                            <button class="question-btn">Do you offer ECAT coaching?</button>
                            <button class="question-btn">Class schedule?</button>
                            <button class="question-btn">How to register?</button>
                            <button class="question-btn">Any demo class?</button>
                            <button class="question-btn">Contact number?</button>
                        </div>

                    </div>

                    <div class="chat-footer">
                        <input type="text" id="userInput" placeholder="Type a message...">
                        <button id="sendBtn"><i class="fas fa-paper-plane"></i></button>
                    </div>
                </div>
<!-- Demo content to show page behind widget -->
<div class="container py-5">
  <h2>Website content goes here</h2>
  <p class="text-muted">Scroll and test the chat widget in the bottom-right corner.</p>
</div>

<!-- Chat + WhatsApp wrapper -->
<div class="chat-whatsapp-wrapper" aria-live="polite">

  <!-- Chat Panel (hidden by default) -->
  <div id="chatPanel" class="chat-panel" role="dialog" aria-labelledby="chatTitle" aria-hidden="true">
    <!-- Header -->
    <div class="chat-header">
      <div class="chat-avatar" aria-hidden="true">AR</div>
      <div>
        <div id="chatTitle" class="chat-title">Rise With Ahmed ‚Äî Help Bot</div>
        <div class="chat-sub">Ask anything ‚Äî quick answers ready</div>
      </div>
      <div class="chat-actions">
        <button class="btn-ghost" id="minimizeBtn" title="Minimize" aria-label="Minimize chat">
          <i class="fa-solid fa-window-minimize"></i>
        </button>
        <button class="btn-ghost" id="closeBtn" title="Close" aria-label="Close chat">
          <i class="fa-solid fa-xmark"></i>
        </button>
      </div>
    </div>

    <!-- Search & quick questions -->
    <div class="chat-search">
      <input id="searchInput" type="search" placeholder="Search questions or type your message..." aria-label="Search questions">
    </div>
    <div class="quick-list" id="quickList" aria-hidden="false">
      <!-- Quick question tags inserted by JS -->
    </div>

    <!-- Messages -->
    <div class="messages" id="messages" tabindex="0" aria-live="polite">
      <!-- Example starter bot message -->
      <div class="msg bot" data-id="welcome">
        <strong>Hi! I'm Ahmed's assistant üëã</strong>
        <div class="meta">Try a quick question below or type your own.</div>
      </div>
    </div>

    <!-- Input -->
    <div class="chat-input">
      <input id="userInput" type="text" placeholder="Type your message..." aria-label="Type message">
      <button id="sendBtn" class="send-btn" aria-label="Send message">
        <i class="fa-solid fa-paper-plane"></i>
      </button>
    </div>
  </div>

  <!-- WhatsApp Button -->
  <!-- Replace PHONE with your phone in international format without +, e.g., 923331234567 -->
  <a id="waLink" class="wa-btn" href="https://wa.me/PHONE" target="_blank" rel="noopener" aria-label="Chat on WhatsApp">
    <i class="fa-brands fa-whatsapp"></i>
    <span class="d-none d-sm-inline">Chat on WhatsApp</span>
  </a>

  <!-- Chat Toggle -->
  <div id="chatToggle" class="chat-toggle" role="button" aria-pressed="false" aria-label="Open chat">
    <i class="fa-solid fa-comment-dots"></i>
  </div>
</div>

                <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

                <script>
                    const carousel = new bootstrap.Carousel('#schoolCarousel', { interval: 3000 });
                    const buttons = document.querySelectorAll('.carousel-buttons button');

                    function goToSlide(index) {
                        carousel.to(index);
                        buttons.forEach(btn => btn.classList.remove('active'));
                        buttons[index].classList.add('active');
                    }

                    document.querySelector('#schoolCarousel').addEventListener('slid.bs.carousel', function (e) {
                        buttons.forEach(btn => btn.classList.remove('active'));
                        buttons[e.to].classList.add('active');
                    });

                    const testimonials = document.querySelectorAll('.testimonial-item');
                    let currentIndex = 0;

                    // Start with the first testimonial visible
                    testimonials[currentIndex].classList.add('active');

                    function showNextTestimonial() {
                        const prev = testimonials[currentIndex];
                        currentIndex = (currentIndex + 1) % testimonials.length;
                        const next = testimonials[currentIndex];

                        // Fade out previous
                        prev.style.opacity = 0;
                        prev.style.transform = "scale(0.95)";

                        // Fade in next
                        next.style.opacity = 1;
                        next.style.transform = "scale(1)";

                        // Update active class
                        prev.classList.remove('active');
                        next.classList.add('active');
                    }

                    // Smooth 4.5s slide
                    setInterval(showNextTestimonial, 4500);

/* -------------------------
   Preset Q&A (10 items)
   Edit as needed
   ------------------------- */
const qaList = [
  { q: "What courses do you offer?", a: "We offer tailored coaching for Math, English, Computer Science and test prep (MCAT/ECAT). Contact us for schedules and fees." },
  { q: "How can I enroll?", a: "You can enroll online via our admission form or visit our center. We‚Äôll guide you through the steps." },
  { q: "What are class timings?", a: "We run morning, afternoon, and evening batches. Exact timings depend on the course ‚Äî we‚Äôll share options after you pick a course." },
  { q: "Do you provide online classes?", a: "Yes ‚Äî we provide live online classes with recorded sessions available for revision." },
  { q: "Is there a trial class?", a: "Yes, a trial class is available. Book a trial and experience our teaching style before enrolling." },
  { q: "What payment methods are accepted?", a: "We accept bank transfer, Easypaisa, JazzCash, and in-person cash payments at the center." },
  { q: "Do you give certificates?", a: "Students receive an attendance & completion certificate for eligible courses." },
  { q: "How many students per batch?", a: "Batch size varies by course; typical groups range from 10‚Äì30 students to keep interaction high." },
  { q: "Do you prepare for board exams?", a: "Yes ‚Äî we offer intensive board exam prep and past-paper practice sessions." },
  { q: "How can I contact support?", a: "Use this chat, WhatsApp, or call the number on our website. We respond quickly during working hours." }
];

/* -------------------------
   UI references
   ------------------------- */
const chatPanel = document.getElementById('chatPanel');
const chatToggle = document.getElementById('chatToggle');
const messagesEl = document.getElementById('messages');
const userInput = document.getElementById('userInput');
const sendBtn = document.getElementById('sendBtn');
const searchInput = document.getElementById('searchInput');
const quickList = document.getElementById('quickList');
const closeBtn = document.getElementById('closeBtn');
const minimizeBtn = document.getElementById('minimizeBtn');

/* -------------------------
   Helper: render quick question chips
   ------------------------- */
function populateQuickList(list){
  quickList.innerHTML = '';
  list.forEach((item, idx) => {
    const el = document.createElement('button');
    el.className = 'quick-item';
    el.type = 'button';
    el.textContent = item.q;
    el.addEventListener('click', () => {
      userSendsMessage(item.q);
    });
    quickList.appendChild(el);
  });
}
populateQuickList(qaList);

/* -------------------------
   Open/close/toggle handlers
   ------------------------- */
function openChat(){
  chatPanel.classList.add('open');
  chatPanel.setAttribute('aria-hidden', 'false');
  chatToggle.setAttribute('aria-pressed', 'true');
  userInput.focus();
  // scroll to bottom
  setTimeout(() => messagesEl.scrollTop = messagesEl.scrollHeight, 180);
}
function closeChat(){
  chatPanel.classList.remove('open');
  chatPanel.setAttribute('aria-hidden', 'true');
  chatToggle.setAttribute('aria-pressed', 'false');
}
chatToggle.addEventListener('click', () => {
  if(chatPanel.classList.contains('open')) closeChat(); else openChat();
});
closeBtn.addEventListener('click', closeChat);
minimizeBtn.addEventListener('click', () => {
  if(chatPanel.classList.contains('open')){
    chatPanel.classList.remove('open');
  } else {
    openChat();
  }
});

/* -------------------------
   Messaging/rendering
   ------------------------- */
function appendMessage(text, who='bot', meta=''){
  const wrap = document.createElement('div');
  wrap.className = `msg ${who}`;
  wrap.innerHTML = `<div>${escapeHtml(text)}</div>${ meta ? `<div class="meta">${escapeHtml(meta)}</div>` : '' }`;
  messagesEl.appendChild(wrap);
  messagesEl.scrollTop = messagesEl.scrollHeight;
  return wrap;
}

/* Escape HTML to prevent injection if using real input */
function escapeHtml(unsafe){
  return unsafe
    .replace(/&/g, "&amp;")
    .replace(/</g, "&lt;")
    .replace(/>/g, "&gt;");
}

/* Simulate typing indicator, returns a Promise that resolves after duration */
function showTyping(duration = 900){
  const typing = document.createElement('div');
  typing.className = 'typing';
  typing.innerHTML = `<span class="dot"></span><span class="dot"></span><span class="dot"></span>`;
  messagesEl.appendChild(typing);
  messagesEl.scrollTop = messagesEl.scrollHeight;
  return new Promise(resolve => {
    setTimeout(() => {
      typing.remove();
      resolve();
    }, duration);
  });
}

/* Find best matching answer (simple search in preset QAs) */
function findAnswer(query){
  if(!query) return null;
  const qLower = query.toLowerCase();
  // exact match first
  for(const item of qaList){
    if(item.q.toLowerCase() === qLower) return item.a;
  }
  // contains match
  for(const item of qaList){
    if(item.q.toLowerCase().includes(qLower) || item.a.toLowerCase().includes(qLower)) return item.a;
  }
  // fallback: partial word match
  const tokens = qLower.split(/\s+/).filter(Boolean);
  for(const item of qaList){
    const score = tokens.reduce((s, t) => s + (item.q.toLowerCase().includes(t) ? 1 : 0) + (item.a.toLowerCase().includes(t) ? 0.5 : 0), 0);
    if(score >= Math.max(1, tokens.length/2)) return item.a;
  }
  return null;
}

/* Called when user sends message (either typed or via quickQ) */
async function userSendsMessage(text){
  if(!text || !text.trim()) return;
  // show user message
  appendMessage(text, 'user');
  userInput.value = '';
  messagesEl.scrollTop = messagesEl.scrollHeight;

  // open chat if closed
  if(!chatPanel.classList.contains('open')) openChat();

  // simulate typing then show answer (or fallback)
  await showTyping(800 + Math.min(1200, text.length * 20)); // dynamic typing time
  const answer = findAnswer(text);
  if(answer){
    appendMessage(answer, 'bot', 'Automated answer');
  } else {
    appendMessage("Sorry, I don't have a precise answer for that. You can contact us via WhatsApp or leave your message ‚Äî we'll reply soon.", 'bot');
  }
}

/* Send button / enter key */
sendBtn.addEventListener('click', () => {
  const text = userInput.value.trim();
  if(text) userSendsMessage(text);
});
userInput.addEventListener('keydown', (e) => {
  if(e.key === 'Enter' && !e.shiftKey){
    e.preventDefault();
    const text = userInput.value.trim();
    if(text) userSendsMessage(text);
  }
});

/* Populate preset messages into quick list on click - handled above */
/* Search filter for quick list and optionally show suggested answers */
searchInput.addEventListener('input', (e) => {
  const val = e.target.value.trim().toLowerCase();
  if(!val){
    populateQuickList(qaList);
    return;
  }
  // filter quick list
  const filtered = qaList.filter(item => item.q.toLowerCase().includes(val) || item.a.toLowerCase().includes(val));
  if(filtered.length) populateQuickList(filtered);
  else {
    // if none match, show 'search' chip that will send the query as message
    quickList.innerHTML = '';
    const el = document.createElement('button');
    el.className = 'quick-item';
    el.type = 'button';
    el.textContent = `Search: "${e.target.value}"`;
    el.addEventListener('click', () => userSendsMessage(e.target.value));
    quickList.appendChild(el);
  }
});

/* Initialize: put greeting and quick questions */
(function init(){
  // add startup bot messages if you want
  setTimeout(() => {
    appendMessage("Welcome! Select a quick question or type your message below. I'm ready to help.", 'bot', 'Tip: Try ' + qaList[0].q);
  }, 600);
})();

/* Accessibility: focus messages area when content updated */
const observer = new MutationObserver(() => {
  messagesEl.setAttribute('aria-busy', 'false');
});
observer.observe(messagesEl, { childList: true, subtree: true });

/* Optional: close chat when clicking outside (mobile friendly) */
document.addEventListener('click', (e) => {
  const inside = e.composedPath().includes(chatPanel) || e.composedPath().includes(chatToggle) || e.composedPath().includes(document.getElementById('waLink'));
  if(!inside && chatPanel.classList.contains('open')){
    // closeChat(); // comment out if you don't want auto-close
  }
});

                </script>

</body>

</html>